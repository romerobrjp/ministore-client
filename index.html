<!DOCTYPE html>
<html ng-app="ministore">

<head>
  <!-- Standard Meta -->
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <!-- Site Properties -->
  <title>Mini Store</title>

  <link rel="stylesheet" type="text/css" href="lib/bootstrap/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="css/app.css" />
</head>

<body>
  <script type="text/javascript" src="lib/jquery.min.js"></script>
  <script type="text/javascript" src="lib/bootstrap/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="lib/angular.min.js"></script>
  <script type="text/javascript" src="app/app.js"></script>
  <script type="text/javascript" src="js/utils.js"></script>

  <div class="container" ng-controller="StoreController as storeCtrl">
    <div class="header clearfix">
      <nav>
        <ul class="nav nav-pills pull-right">
          <li role="presentation" class="active"><a href="#">Home</a></li>
          <li role="presentation"><a href="#">About</a></li>
          <li role="presentation"><a href="#">Contact</a></li>
        </ul>
      </nav>
      <h3 class="text-muted">Romero Meireles</h3>
    </div>

    <div class="jumbotron">
      <h1>e.life challange</h1>
      <p class="lead">Cras justo odio, dapibus ac facilisis in, egestas eget quam. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus.</p>
      <p><a class="btn btn-lg btn-success" href="https://github.com/romeromfm/ministore" role="button">GitHub project</a></p>
    </div>

    <div class="row">
      <div 
        class="col-xs-12 col-sm-12 col-md-12 col-lg-6" 
        ng-hide="storeCtrl.product.soldOut" 
        ng-repeat="product in storeCtrl.products | orderBy:'price'"
      >
        <div class="thumbnail">
          <img ng-src="{{ product.images[0].full}}" alt="..." width="150">

          <div class="caption">
            <h3 class="media-heading">{{ product.name }}</h3>
            <p>{{ product.description | cut:true:100:'...' }}</p>
            <span class="">{{ product.price | currency }}</span>
          </div>

          <button 
            class="btn btn-default" 
            ng-show="product.canPurchase" 
            role="button"
          >
            Buy
          </button>
        </div>

        <section ng-controller="PanelController as panelCtrl">
          <ul class="nav nav-pills">
            <li ng-class="{ active: panelCtrl.isSelected(1)}"> 
              <a href ng-click="panelCtrl.selectTab(1)"> Description </a> 
            </li>
            
            <li ng-class="{ active: panelCtrl.isSelected(2)}"> 
              <a href ng-click="panelCtrl.selectTab(2)"> Specifications </a> 
            </li>
            
            <li ng-class="{ active: panelCtrl.isSelected(3)}"> 
              <a href ng-click="panelCtrl.selectTab(3)"> Reviews </a> 
            </li>
          </ul>

          <div class="panel" ng-show="panelCtrl.isSelected(1)">           
            <blockquote>
              <p> {{ product.description }} </p>
            </blockquote>
          </div>

          <div class="panel" ng-show="panelCtrl.isSelected(2)">
            <blockquote>
              <p> {{ product.price | currency }} </p>
            </blockquote>
          </div>

          <div class="panel" ng-show="panelCtrl.isSelected(3)">
            <div ng-repeat="review in product.reviews">
              <blockquote>
                <b>{{ review.stars }} Stars </b>
                <p> {{ review.body }} </p>
                <cite class="text-muted"> By: {{ review.author }} </cite>
              </blockquote>
            </div>

            <form 
              name="reviewForm" 
              ng-controller="ReviewController as reviewCtrl" 
              ng-submit="reviewForm.$valid && reviewCtrl.addReview(product)"
              novalidate
            >
              <blockquote>
                <b>{{ reviewCtrl.review.stars }} Stars </b>
                <p> {{ reviewCtrl.review.body }} </p>
                <cite class="text-muted"> By: {{ reviewCtrl.review.author }} </cite>
              </blockquote>

              <h4>Submit a Review</h4>
              <div class="form-group">
                <label for="stars_select">Stars:</label>
                <select 
                  id="stars-select" 
                  class="form-control" 
                  ng-model="reviewCtrl.review.stars"
                  ng-options="stars for stars in [5,4,3,2,1]"
                  title="Stars"
                  required
                >
                  <option value="">Rate the product</option>
                </select>
              </div>

              <div class="form-group">
                <label for="sreview_textarea">Review:</label>
                <textarea 
                  id="review_textarea" 
                  class="form-control" 
                  ng-model="reviewCtrl.review.body" 
                  placeholder="Your review here" 
                  required
                >
                </textarea>
              </div>

              <div class="form-group">
                <label>by:</label>
                <input 
                  class="form-control" 
                  ng-model="reviewCtrl.review.author" 
                  placeholder="E-mail" 
                  required
                  type="email" 
                />
              </div>

              <input type="submit" value="Submit" class="btn btn-default" />
            </form>
          </div>
        </section>
      </div>      
    </div>


    <footer class="footer">
      <p>&copy; 2016 Romero Meireles</p>
    </footer>
  </div>
</body>

</html>